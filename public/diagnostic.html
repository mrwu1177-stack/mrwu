<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HelloYan - ç½‘ç»œè¯Šæ–­</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: #0b0e11;
      color: #eaecef;
    }
  </style>
</head>
<body class="min-h-screen p-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold text-yellow-400 mb-8">ğŸ” HelloYan ç½‘ç»œè¯Šæ–­</h1>
    
    <div class="bg-card p-6 rounded-lg mb-6 border border-yellow-500/20">
      <h2 class="text-xl font-bold mb-4">è¯Šæ–­è¯´æ˜</h2>
      <p class="text-slate-400 mb-2">å¦‚æœæœ¬åœ°ç¯å¢ƒæ— æ³•è®¿é—®å¤–éƒ¨ APIï¼Œè¿™æ˜¯æ­£å¸¸æƒ…å†µã€‚</p>
      <p class="text-slate-400 mb-2">éƒ¨ç½²åˆ° Railway åï¼Œç½‘ç»œé—®é¢˜é€šå¸¸ä¼šè‡ªåŠ¨è§£å†³ã€‚</p>
      <div class="mt-4 p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/30">
        <p class="text-yellow-400 font-bold">âœ… å»ºè®®</p>
        <ul class="text-slate-300 mt-2 space-y-1">
          <li>â€¢ ç›´æ¥éƒ¨ç½²åˆ° Railwayï¼Œæµ‹è¯•çº¿ä¸Šç¯å¢ƒ</li>
          <li>â€¢ Railway æœ‰æ›´å¥½çš„ç½‘ç»œç¯å¢ƒï¼Œå¯ä»¥è®¿é—®å¤–éƒ¨ API</li>
          <li>â€¢ å¦‚æœ Railway ä¹Ÿæœ‰é—®é¢˜ï¼Œå¯èƒ½éœ€è¦é…ç½®ä»£ç†æˆ– VPN</li>
        </ul>
      </div>
    </div>

    <div id="results" class="space-y-4">
      <h2 class="text-xl font-bold mb-4">API è¿æ¥æµ‹è¯•ç»“æœ</h2>
      <p class="text-slate-400">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...</p>
      <button onclick="runTests()" class="btn-primary px-6 py-3 rounded-lg font-bold">
        å¼€å§‹æµ‹è¯•
      </button>
    </div>

    <div id="detailedResults" class="mt-8 space-y-4 hidden">
      <h2 class="text-xl font-bold mb-4">è¯¦ç»†ç»“æœ</h2>
      <pre id="jsonOutput" class="bg-card p-4 rounded-lg text-xs overflow-x-auto border border-slate-700"></pre>
    </div>
  </div>

  <script>
    async function runTests() {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '<p class="text-yellow-400">æ­£åœ¨æµ‹è¯•ï¼Œè¯·ç¨å€™...</p>';

      const tests = [
        { name: 'Binance API', url: 'https://api.binance.com/api/v3/ping' },
        { name: 'CoinGecko API', url: 'https://api.coingecko.com/api/v3/ping' },
        { name: 'æœ¬æœº Next.js API', url: '/api/test-connection' },
        { name: 'å¤–éƒ¨ API è¯Šæ–­', url: '/api/test-external-apis' }
      ];

      const results = [];

      for (const test of tests) {
        try {
          const start = Date.now();
          const response = await fetch(test.url, { 
            signal: AbortSignal.timeout(5000) 
          });
          const duration = Date.now() - start;
          
          results.push({
            name: test.name,
            url: test.url,
            status: response.status,
            success: response.ok,
            duration: duration + 'ms',
            message: response.ok ? 'âœ… è¿æ¥æˆåŠŸ' : `âŒ é”™è¯¯: ${response.status}`
          });
        } catch (error) {
          results.push({
            name: test.name,
            url: test.url,
            status: 'ERROR',
            success: false,
            duration: 'è¶…æ—¶',
            message: `âŒ ${error.message}`
          });
        }
      }

      // æ˜¾ç¤ºç»“æœ
      resultsDiv.innerHTML = results.map(r => `
        <div class="bg-card p-4 rounded-lg border ${r.success ? 'border-green-500/30' : 'border-red-500/30'}">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-bold ${r.success ? 'text-green-400' : 'text-red-400'}">${r.name}</p>
              <p class="text-xs text-slate-500 mt-1">${r.url}</p>
            </div>
            <div class="text-right">
              <p class="${r.success ? 'text-green-400' : 'text-red-400'}">${r.message}</p>
              <p class="text-xs text-slate-500">${r.duration}</p>
            </div>
          </div>
        </div>
      `).join('');

      // æ˜¾ç¤ºè¯¦ç»† JSON
      const detailedResultsDiv = document.getElementById('detailedResults');
      detailedResultsDiv.classList.remove('hidden');
      document.getElementById('jsonOutput').textContent = JSON.stringify(results, null, 2);
    }

    // Tailwind é…ç½®
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'card': '#1e2329',
            'btn-primary': 'linear-gradient(135deg, #fcd535, #f0b90b)',
          }
        }
      }
    }
  </script>
</body>
</html>
